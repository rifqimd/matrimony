{"version":3,"file":"playlist.js","mappings":"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","sources":["webpack://audio-player/../utils/toHHMMSS.js","webpack://audio-player/webpack/bootstrap","webpack://audio-player/webpack/runtime/define property getters","webpack://audio-player/webpack/runtime/hasOwnProperty shorthand","webpack://audio-player/../utils/getRandomNumber.js","webpack://audio-player/../wp-utils/v1/jsonParse.js","webpack://audio-player/./src/js/BAudioPlaylist.js","webpack://audio-player/./src/js/skins/playlistCard/playlistCard.js","webpack://audio-player/./src/js/skins/bluePlaylist/bluePlaylist.js","webpack://audio-player/./src/js/playlist.js"],"sourcesContent":["const toHHMMSS = (time) => {\r\n  var sec_num = parseInt(time, 10); // don't forget the second param\r\n  var hours = Math.floor(sec_num / 3600);\r\n  var minutes = Math.floor((sec_num - hours * 3600) / 60);\r\n  var seconds = sec_num - hours * 3600 - minutes * 60;\r\n\r\n  if (hours < 10) {\r\n    hours = \"0\" + hours;\r\n  }\r\n  if (minutes < 10) {\r\n    minutes = \"0\" + minutes;\r\n  }\r\n  if (seconds < 10) {\r\n    seconds = \"0\" + seconds;\r\n  }\r\n  return minutes + \":\" + seconds;\r\n};\r\n\r\nexport default toHHMMSS;\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const getRandomNumber = (max, currentNumber) => {\r\n  const number = Math.floor(Math.random() * max);\r\n  if (currentNumber === number) {\r\n    return getRandomNumber(max, currentNumber);\r\n  }\r\n  return number;\r\n};\r\n\r\nexport default getRandomNumber;\r\n","const jsonParse = (json) => {\r\n  let parsedJson = null;\r\n  try {\r\n    parsedJson = JSON.parse(json);\r\n  } catch (error) {\r\n    console.warn(error.message);\r\n  }\r\n  return parsedJson;\r\n};\r\n\r\nexport default jsonParse;\r\n","import getRandomNumber from \"../../../utils/getRandomNumber\";\r\nimport toHHMMSS from \"../../../utils/toHHMMSS\";\r\nimport jsonParse from \"../../../wp-utils/v1/jsonParse\";\r\n\r\nclass BAudioPlaylist {\r\n  constructor(dom, options = {}, items = []) {\r\n    this.shuffle = false;\r\n    this.repeat = false;\r\n    this.currentIndex = 0;\r\n    this.player = null;\r\n    this.isAdmin = options?.isAdmin;\r\n    this.prevIndex = null;\r\n    return this.playlist(dom, options, items);\r\n  }\r\n\r\n  playlist(dom, options = {}, items = []) {\r\n    if (!dom) return null;\r\n    const audioTag = dom?.tagName === \"AUDIO\" ? dom : dom.querySelector(\"audio\");\r\n\r\n    const player = new Plyr(audioTag, options);\r\n    this.player = player;\r\n    const infos = dom?.dataset?.infos ? jsonParse(dom.dataset.infos) || {} : {};\r\n\r\n    // elements\r\n    const play2 = dom.querySelector(\"[data-plyr=play2]\");\r\n    const artistEl = dom.querySelector(\"[data-plyr=artist]\");\r\n    const titleEl = dom.querySelector(\"[data-plyr=title]\");\r\n    const prevEl = dom.querySelector(\"[data-plyr=prev]\");\r\n    const nextEl = dom.querySelector(\"[data-plyr=next]\");\r\n    const shuffleEl = dom.querySelector(\"[data-plyr=shuffle]\");\r\n    const repeatEl = dom.querySelector(\"[data-plyr=repeat]\");\r\n    const itemsEl = dom.querySelectorAll(\"[data-audio-item]\");\r\n    const coverEl = dom.querySelector(\"[data-plyr=cover]\");\r\n\r\n    repeatEl?.addEventListener(\"click\", (e) => {\r\n      this.handleFeature(e);\r\n    });\r\n    shuffleEl?.addEventListener(\"click\", (e) => this.handleFeature(e));\r\n\r\n    if (!items.length) {\r\n      itemsEl.forEach((item) => items.push({ source: item.dataset?.audioSource }));\r\n    }\r\n\r\n    if (!items.length) {\r\n      return false;\r\n    }\r\n\r\n    player.on(\"ready\", () => {\r\n      if (!this.isAdmin) {\r\n        this.dispatchEvent(this.currentIndex, false);\r\n      }\r\n    });\r\n\r\n    // pause other player if playing and multiple off\r\n    if (!window.h5apPlayer?.multipleAudio) {\r\n      player.on(\"play\", () => {\r\n        const players = document.querySelectorAll(\"audio\");\r\n        players.forEach((item) => {\r\n          if (!item.isEqualNode(audioTag)) {\r\n            item.pause();\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    window.player = player;\r\n    window.dom = dom;\r\n\r\n    itemsEl.forEach((item, index) => {\r\n      const audio = document.createElement(\"audio\");\r\n      if (items[index]?.source) {\r\n        audio.src = items[index]?.source;\r\n        audio.addEventListener(\"loadedmetadata\", () => {\r\n          if (item.querySelector(\".duration\")) {\r\n            item.querySelector(\".duration\").innerText = toHHMMSS(audio.duration);\r\n          }\r\n        });\r\n      }\r\n      item.addEventListener(\"click\", () => {\r\n        window.player = player;\r\n        // console.log(index, this.currentIndex);\r\n        if (this.currentIndex === index) {\r\n          if (player.playing) {\r\n            player.pause();\r\n          } else {\r\n            player.play();\r\n          }\r\n        } else {\r\n          this.prevIndex = index > 0 ? index - 1 : items.length - 1;\r\n          this.currentIndex = index;\r\n          this.dispatchEvent(this.currentIndex);\r\n        }\r\n      });\r\n    });\r\n\r\n    // update audio\r\n    player.on(\"updateTrack\", ({ detail }) => {\r\n      // player.pause();\r\n      const { title, artist, source, poster } = items[detail?.index];\r\n\r\n      if (this.prevIndex === detail.index && player.playing) {\r\n        player.pause();\r\n      } else {\r\n        // update src\r\n        if (coverEl) coverEl.src = poster;\r\n        if (audioTag) audioTag.src = source;\r\n        if (titleEl) titleEl.innerText = title;\r\n        if (artistEl) artistEl.innerText = artist;\r\n        if (detail.play) {\r\n          player.play();\r\n        }\r\n      }\r\n\r\n      // remove active class from all item\r\n      itemsEl.forEach((item) => {\r\n        item.classList.remove(\"item-active\");\r\n        item.classList.remove(\"item-playing\");\r\n      });\r\n\r\n      // add active class on current item\r\n      itemsEl[detail?.index].classList.add(\"item-active\");\r\n    });\r\n\r\n    player.on(\"ended\", () => {\r\n      if (this.repeat) {\r\n        this.dispatchEvent(this.currentIndex);\r\n      } else {\r\n        if (infos?.autoplayNextTrack) {\r\n          this.prevIndex = this.currentIndex;\r\n          if (this.shuffle) {\r\n            this.currentIndex = getRandomNumber(items.length, this.currentIndex);\r\n            this.dispatchEvent(this.currentIndex);\r\n          } else {\r\n            this.currentIndex = items.length > this.currentIndex + 1 ? this.currentIndex + 1 : 0;\r\n            this.dispatchEvent(this.currentIndex);\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    // handle progress ber\r\n    const progressEl = dom.querySelector(\".song-played-progress\");\r\n    progressEl?.addEventListener(\"click\", function (e) {\r\n      const position = player.duration / progressEl.offsetWidth;\r\n      player.currentTime = e.offsetX * position;\r\n    });\r\n\r\n    player.on(\"timeupdate\", function () {\r\n      progressEl?.setAttribute(\"value\", (100 / player.duration) * player.currentTime);\r\n    });\r\n\r\n    // handle second play button\r\n    play2?.addEventListener(\"click\", function () {\r\n      if (player.playing) {\r\n        player.pause();\r\n      } else {\r\n        player.play();\r\n      }\r\n    });\r\n    player.on(\"play\", () => {\r\n      play2?.classList.add(\"playing\");\r\n      play2?.classList.remove(\"paused\");\r\n      itemsEl[this.currentIndex]?.classList.add(\"item-playing\");\r\n    });\r\n    player.on(\"pause\", () => {\r\n      play2?.classList.add(\"paused\");\r\n      play2?.classList.remove(\"playing\");\r\n      itemsEl[this.currentIndex]?.classList.remove(\"item-playing\");\r\n    });\r\n\r\n    // handle next track button\r\n    nextEl?.addEventListener(\"click\", () => {\r\n      const nextIndex = items.length > this.currentIndex + 1 ? this.currentIndex + 1 : 0;\r\n      this.prevIndex = this.currentIndex;\r\n      this.currentIndex = nextIndex;\r\n      this.dispatchEvent(nextIndex);\r\n    });\r\n\r\n    // handle prev track button\r\n    prevEl?.addEventListener(\"click\", () => {\r\n      const prevIndex = this.currentIndex > 0 ? this.currentIndex - 1 : this.currentIndex;\r\n      if (this.currentIndex !== prevIndex) {\r\n        this.prevIndex = this.currentIndex;\r\n        this.currentIndex = prevIndex;\r\n      }\r\n      this.dispatchEvent(prevIndex);\r\n    });\r\n\r\n    return player;\r\n  }\r\n\r\n  /**\r\n   * handle repeat/shuffle feature\r\n   * @param {event} e\r\n   */\r\n  handleFeature(e) {\r\n    const active = e.target?.dataset.active || \"false\";\r\n    if (active !== \"false\") {\r\n      e.target.dataset.active = false;\r\n      this[e.target?.dataset?.plyr] = false;\r\n    } else {\r\n      e.target.dataset.active = true;\r\n      this[e.target?.dataset?.plyr] = true;\r\n    }\r\n    window.event = e;\r\n  }\r\n\r\n  /**\r\n   * Dispatch updateTrack event\r\n   * @param {*} index\r\n   */\r\n  dispatchEvent(index, play = true) {\r\n    const event = new CustomEvent(\"updateTrack\", { detail: { index, play } });\r\n    this.player?.elements?.container?.dispatchEvent(event);\r\n  }\r\n}\r\n\r\nexport default BAudioPlaylist;\r\n","import \"./style.scss\";\r\n\r\nconst cardSkin = (items = []) => {\r\n  return `<div class=\"flat-black-player-container playlist_container\">\r\n      <div id=\"list-screen\" class=\"slide-in-top\">\r\n        <div id=\"list-screen-header\" class=\"hide-playlist\">\r\n          <img id=\"up-arrow\" src=\"https://521dimensions.com/img/open-source/amplitudejs/examples/flat-black/up.svg\"/>\r\n          Hide Playlist\r\n        </div>\r\n        <div id=\"list\">\r\n          \r\n          ${items\r\n            .map(\r\n              ({ title, artist }, index) => `\r\n            <div class=\"song amplitude-song-container amplitude-play-pause\" data-audio-item data-index=\"${index}\">\r\n              <span class=\"song-number-now-playing\">\r\n                <span class=\"number\">${index + 1}</span>\r\n                <img class=\"now-playing\" src=\"https://521dimensions.com/img/open-source/amplitudejs/examples/flat-black/now-playing.svg\"/>\r\n              </span>\r\n  \r\n              <div class=\"song-meta-container\">\r\n                <span class=\"song-name\" data-amplitude-song-info=\"name\" data-amplitude-song-index=\"0\">${title || \"\"}</span>\r\n                <span class=\"song-artist-album\"><span data-amplitude-song-info=\"artist\" data-amplitude-song-index=\"0\">${artist || \"\"}</span>\r\n              </div>\r\n              <span class=\"duration\">3:30<span>\r\n            </div>`\r\n            )\r\n            .join(\"\")}\r\n        </div>\r\n  \r\n        <div id=\"list-screen-footer\">\r\n          <div id=\"list-screen-meta-container\">\r\n            <span data-amplitude-song-info=\"name\" class=\"song-name\"></span>\r\n  \r\n            <div class=\"song-artist-album\">\r\n              <span data-amplitude-song-info=\"artist\"></span>\r\n            </div>\r\n          </div>\r\n          <div class=\"list-controls\">\r\n            <div class=\"list-previous amplitude-prev\"></div>\r\n            <div class=\"list-play-pause amplitude-play-pause paused\" data-plyr=\"play2\"></div>\r\n            <div class=\"list-next amplitude-next\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div id=\"player-screen\">\r\n        <div class=\"player-header down-header\">\r\n          <img id=\"down\" src=\"https://521dimensions.com/img/open-source/amplitudejs/examples/flat-black/down.svg\"/>\r\n          Show Playlist\r\n        </div>\r\n        <div id=\"player-top\">\r\n          <img data-amplitude-song-info=\"cover_art_url\" data-plyr=\"cover\" src=\"${items[0]?.poster}\"/>\r\n        </div>\r\n        <div id=\"player-progress-bar-container\">\r\n          <progress class=\"song-played-progress\" min=\"0\" max=\"100\" step=\"0.01\"></progress>\r\n          <progress id=\"song-buffered-progress\" class=\"amplitude-buffered-progress\" value=\"0\"></progress>\r\n        </div>\r\n        \r\n        <div id=\"player-middle\">\r\n          <div id=\"time-container\">\r\n            <span class=\"amplitude-current-time time-container plyr__time--current\"></span>\r\n            <span class=\"amplitude-duration-time time-container plyr__time--duration\"></span>\r\n          </div>\r\n          <div id=\"meta-container\">\r\n            <span data-amplitude-song-info=\"name\" class=\"song-name\"></span>\r\n  \r\n            <div class=\"song-artist-album\">\r\n              <span data-amplitude-song-info=\"artist\"></span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id=\"player-bottom\">\r\n          <div id=\"control-container\">\r\n  \r\n            <div id=\"shuffle-container\">\r\n              <div class=\"amplitude-shuffle amplitude-shuffle-off\" data-plyr=\"shuffle\" id=\"shuffle\"></div>\r\n            </div>\r\n  \r\n            <div id=\"prev-container\">\r\n              <div class=\"amplitude-prev\" data-plyr=\"prev\" id=\"previous\"></div>\r\n            </div>\r\n  \r\n            <div id=\"play-pause-container\">\r\n              <div class=\"amplitude-play-pause\" data-plyr=\"play\" id=\"play-pause\"></div>\r\n            </div>\r\n  \r\n            <div id=\"next-container\">\r\n              <div class=\"amplitude-next\" data-plyr=\"next\" id=\"next\"></div>\r\n            </div>\r\n  \r\n            <div id=\"repeat-container\">\r\n              <div class=\"amplitude-repeat\" id=\"repeat\" data-plyr=\"repeat\"></div>\r\n            </div>\r\n  \r\n          </div>\r\n          <div id=\"volume-container\">\r\n            <button type=\"button\" class=\"plyr__control\" aria-label=\"Mute\" data-plyr=\"mute\">\r\n              <svg class=\"icon--pressed\" role=\"presentation\"><use xlink:href=\"#plyr-muted\"></use></svg>\r\n              <svg class=\"icon--not-pressed\" role=\"presentation\"><use xlink:href=\"#plyr-volume\"></use></svg>\r\n              <span class=\"label--pressed plyr__tooltip\" role=\"tooltip\">Unmute</span>\r\n              <span class=\"label--not-pressed plyr__tooltip\" role=\"tooltip\">Mute</span>\r\n            </button>\r\n            <input data-plyr=\"volume\" type=\"range\" min=\"0\" max=\"1\" step=\"0.05\" value=\"1\" autocomplete=\"off\" aria-label=\"Volume\" class=\"amplitude-volume-slider\">\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>`;\r\n};\r\n\r\nexport default cardSkin;\r\n\r\nexport const listItem = () => {};\r\n","import \"./style.scss\";\r\nconst bluePlaylistSkin = (items = []) => {\r\n  return `\r\n    <div class=\"playlist_container hextensive\">\r\n        <div class=\"plyr__controls controls left\">\r\n        \t<img class=\"poster\" data-plyr=\"cover\" src=\"${items[0]?.poster || \"\"}\" alt=\"\">\r\n        \t<div class=\"plyr_controls\">\r\n            <div class=\"progressbar plyr__controls\">\r\n                <div class=\"plyr__time plyr__time--current\" aria-label=\"Current time\">00:00</div>\r\n                <div class=\"plyr__progress\">\r\n                    <input data-plyr=\"seek\" type=\"range\" min=\"0\" max=\"100\" step=\"0.01\" value=\"0\" aria-label=\"Seek\">\r\n                    <progress class=\"plyr__progress__buffer\" min=\"0\" max=\"100\" value=\"0\">% buffered</progress>\r\n                    <span role=\"tooltip\" class=\"plyr__tooltip\">00:00</span>\r\n                </div>\r\n                <div class=\"plyr__time plyr__time--duration\" aria-label=\"Duration\">00:00</div>\r\n            </div>\r\n            <div class=\"main-controls plyr__controls\">\r\n                <div class=\"repeat-shuffle\" >\r\n                    <span class=\"plyr__control\" data-plyr=\"shuffle\"><svg class=\"icon\">\r\n                    <use xlink:href=\"#shuffle\"></use>\r\n                    </svg></span>\r\n                    <span class=\"plyr__control\" active=\"false\" data-plyr=\"repeat\"><svg class=\"icon\">\r\n                    <use xlink:href=\"#exchange\"></use>\r\n                    </svg></span>\r\n                </div>\r\n                <div class=\"re-ply-fast\">\r\n                    <button type=\"button\" class=\"plyr__control\" data-plyr=\"prev\">\r\n                        <svg role=\"presentation\"><use xlink:href=\"#plyr-rewind\"></use></svg>\r\n                        <span class=\"plyr__tooltip\" role=\"tooltip\">Rewind {seektime} secs</span>\r\n                    </button>\r\n                    <button type=\"button\" class=\"plyr__control\" aria-label=\"Play, {title}\" data-plyr=\"play\">\r\n                        <svg class=\"icon--pressed\" role=\"presentation\"><use xlink:href=\"#plyr-pause\"></use></svg>\r\n                        <svg class=\"icon--not-pressed\" role=\"presentation\"><use xlink:href=\"#plyr-play\"></use></svg>\r\n                        <span class=\"label--pressed plyr__tooltip\" role=\"tooltip\">Pause</span>\r\n                        <span class=\"label--not-pressed plyr__tooltip\" role=\"tooltip\">Play</span>\r\n                    </button>\r\n                    <button type=\"button\" class=\"plyr__control\" data-plyr=\"next\">\r\n                        <svg role=\"presentation\"><use xlink:href=\"#plyr-fast-forward\"></use></svg>\r\n                        <span class=\"plyr__tooltip\" role=\"tooltip\">Forward {seektime} secs</span>\r\n                    </button>\r\n                </div>\r\n                <div class=\"volume\">\r\n                    <button type=\"button\" class=\"plyr__control\" aria-label=\"Mute\" data-plyr=\"mute\">\r\n                        <svg class=\"icon--pressed\" role=\"presentation\"><use xlink:href=\"#plyr-muted\"></use></svg>\r\n                        <svg class=\"icon--not-pressed\" role=\"presentation\"><use xlink:href=\"#plyr-volume\"></use></svg>\r\n                        <span class=\"label--pressed plyr__tooltip\" role=\"tooltip\">Unmute</span>\r\n                        <span class=\"label--not-pressed plyr__tooltip\" role=\"tooltip\">Mute</span>\r\n                    </button>\r\n                    <div class=\"plyr__volume\">\r\n                        <input data-plyr=\"volume\" type=\"range\" min=\"0\" max=\"1\" step=\"0.05\" value=\"1\" autocomplete=\"off\" aria-label=\"Volume\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n          </div>\r\n            <div class=\"plyr__meta\">\r\n                <h2 class=\"title\" data-plyr=\"title\">${items[0]?.title}</h2>\r\n                <h3 class=\"artist\" data-plyr=\"artist\">${items[0]?.artist}</h3>\r\n            </div>\r\n        </div>\r\n\t\t\t\t<div class=\"right\">\r\n\t\t\t\t${items\r\n          .map(\r\n            ({ title, artist }, index) =>\r\n              `<div class=\"hsong-item plyr__controlss\"  data-index=\"${index}\" data-audio-item>\r\n\t\t\t\t\t\t\t<span class=\"ply_icon\">\r\n\t\t\t\t\t\t\t\t<button type=\"button\" class=\"plyr__control\" aria-label=\"Play, {title}\">\r\n\t\t\t\t\t\t\t\t\t<svg class=\"icon--pressed\" role=\"presentation\">\r\n\t\t\t\t\t\t\t\t\t\t<use href=\"#plyr-pause\"></use>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t\t<svg class=\"icon--not-pressed\" role=\"presentation\">\r\n\t\t\t\t\t\t\t\t\t\t<use href=\"#plyr-play\"></use>\r\n\t\t\t\t\t\t\t\t\t</svg>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t<div class=\"meta-data\">\r\n\t\t\t\t\t\t\t\t<h3 class=\"title\">${title || \"\"}</h3>\r\n\t\t\t\t\t\t\t\t<span class=\"singer\">${artist || \"\"}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<span class=\"time duration\">00:00</span>\r\n\t\t\t\t\t\t</div>`\r\n          )\r\n          .join(\"\")}\r\n\t\t\t\t</div>\r\n    \t</div>`;\r\n};\r\n\r\nexport default bluePlaylistSkin;\r\n","import BAudioPlaylist from \"./BAudioPlaylist\";\r\nimport cardSkin from \"./skins/playlistCard/playlistCard\";\r\n// import H5AP_Plalist from \"./player/playlist\";\r\nimport bluePlaylistSkin from \"./skins/bluePlaylist/bluePlaylist\";\r\nimport \"./../css/player.scss\";\r\n\r\nimport \"./skins/simpleSkin/style.scss\";\r\n\r\n// const H5AP_Plalist_Obj = new H5AP_Plalist();\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n  // initialize cardPlaylist\r\n  const cardPlaylists = document.querySelectorAll(\".audioPlaylistCard\");\r\n  cardPlaylists.forEach((playlist) => {\r\n    let items = [];\r\n    try {\r\n      items = JSON.parse(playlist.dataset?.items);\r\n      playlist.removeAttribute(\"data-items\");\r\n    } catch (error) {\r\n      items = [];\r\n    }\r\n    cardPlaylist(playlist, {}, items);\r\n  });\r\n\r\n  // initialize bluePlaylists\r\n  const bluePlaylists = document.querySelectorAll(\".bluePlaylist:not(.elementorBluePlaylist)\");\r\n\r\n  bluePlaylists.forEach((playlist) => {\r\n    let items = [];\r\n    try {\r\n      items = JSON.parse(playlist.dataset?.items);\r\n      playlist.removeAttribute(\"data-items\");\r\n    } catch (error) {\r\n      items = [];\r\n    }\r\n    bluePlaylist(playlist, {}, items);\r\n  });\r\n\r\n  // initialize simple playlist\r\n  const simplePlaylists = document.querySelectorAll(\".simplePlaylist:not(.elementorSimplePlaylist)\");\r\n  simplePlaylists.forEach((playlist) => {\r\n    let items = [];\r\n    let options = {};\r\n    try {\r\n      items = JSON.parse(playlist.dataset?.items || \"[]\");\r\n      options = JSON.parse(playlist.dataset?.options || \"{}\");\r\n      playlist.removeAttribute(\"data-items\");\r\n      playlist.removeAttribute(\"data-options\");\r\n    } catch (error) {\r\n      items = [];\r\n    }\r\n    console.log({ playlist, options, items });\r\n    simplePlaylist(playlist, options, items);\r\n  });\r\n\r\n  // Elementor\r\n  window.addEventListener(\"elementor/frontend/init\", function () {\r\n    //This is for Playlist\r\n    elementorFrontend.hooks.addAction(\"frontend/element_ready/PlaylistAudioPlayer.default\", function (scope, $) {\r\n      const hExtensive = $(scope).find(\".elementorBluePlaylist\")?.[0];\r\n      if (hExtensive) {\r\n        let items = [];\r\n        try {\r\n          items = JSON.parse(hExtensive.dataset?.items);\r\n          hExtensive.removeAttribute(\"data-items\");\r\n        } catch (error) {\r\n          items = [];\r\n        }\r\n        bluePlaylist(hExtensive, {}, items);\r\n      }\r\n\r\n      const elementorSimplePlaylist = $(scope).find(\".elementorSimplePlaylist\")?.[0];\r\n\r\n      if (elementorSimplePlaylist) {\r\n        let items = [];\r\n        try {\r\n          items = JSON.parse(elementorSimplePlaylist.dataset?.items);\r\n          elementorSimplePlaylist.removeAttribute(\"data-items\");\r\n        } catch (error) {\r\n          items = [];\r\n        }\r\n        simplePlaylist(elementorSimplePlaylist, {}, items);\r\n      }\r\n    });\r\n  });\r\n});\r\n\r\nexport const bluePlaylist = (dom, options = {}, items = []) => {\r\n  const player = new BAudioPlaylist(\r\n    dom,\r\n    {\r\n      controls: bluePlaylistSkin(items),\r\n      ...options,\r\n    },\r\n    items\r\n  );\r\n  return player;\r\n};\r\n\r\nexport const cardPlaylist = (dom, options = {}, items = []) => {\r\n  const player = new BAudioPlaylist(\r\n    dom,\r\n    {\r\n      controls: cardSkin(items),\r\n      ...options,\r\n    },\r\n    items\r\n  );\r\n\r\n  // the code will be extract to another function\r\n  dom.getElementsByClassName(\"down-header\")[0]?.addEventListener(\"click\", function () {\r\n    var list = dom.querySelector(\"#list\");\r\n    list.style.height = parseInt(dom.querySelector(\".flat-black-player-container\").offsetHeight) - 135 + \"px\";\r\n    dom.querySelector(\"#list-screen\").classList.remove(\"slide-out-top\");\r\n    dom.querySelector(\"#list-screen\").classList.add(\"slide-in-top\");\r\n    dom.querySelector(\"#list-screen\").style.display = \"block\";\r\n  });\r\n\r\n  dom.getElementsByClassName(\"hide-playlist\")[0]?.addEventListener(\"click\", function () {\r\n    dom.querySelector(\"#list-screen\").classList.remove(\"slide-in-top\");\r\n    dom.querySelector(\"#list-screen\").classList.add(\"slide-out-top\");\r\n    dom.querySelector(\"#list-screen\").style.display = \"none\";\r\n  });\r\n\r\n  return player;\r\n};\r\n\r\nexport const simplePlaylist = (dom, options = {}, items = []) => {\r\n  const player = new BAudioPlaylist(\r\n    dom,\r\n    {\r\n      ...options,\r\n    },\r\n    items\r\n  );\r\n  return player;\r\n};\r\n"],"names":["time","sec_num","parseInt","hours","Math","floor","minutes","seconds","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","d","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","getRandomNumber","max","currentNumber","number","random","constructor","dom","options","arguments","length","items","this","shuffle","repeat","currentIndex","player","isAdmin","prevIndex","playlist","audioTag","tagName","querySelector","Plyr","infos","dataset","json","parsedJson","JSON","parse","error","console","warn","message","jsonParse","play2","artistEl","titleEl","prevEl","nextEl","shuffleEl","repeatEl","itemsEl","querySelectorAll","coverEl","addEventListener","e","handleFeature","forEach","item","push","source","audioSource","on","dispatchEvent","window","h5apPlayer","multipleAudio","document","isEqualNode","pause","index","audio","createElement","src","innerText","toHHMMSS","duration","playing","play","_ref","detail","title","artist","poster","classList","remove","add","autoplayNextTrack","progressEl","position","offsetWidth","currentTime","offsetX","setAttribute","nextIndex","target","active","plyr","event","CustomEvent","elements","container","map","join","removeAttribute","cardPlaylist","bluePlaylist","log","simplePlaylist","elementorFrontend","hooks","addAction","scope","$","hExtensive","find","elementorSimplePlaylist","BAudioPlaylist","controls","bluePlaylistSkin","cardSkin","getElementsByClassName","style","height","offsetHeight","display"],"sourceRoot":""}